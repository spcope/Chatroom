import java.net.*;import java.util.*;import java.io.*;public class ClientSide{    private Socket server;    private Scanner key;    private Scanner inServer;    private PrintWriter outServer;    private OutputThread out;    private InputThread in;    private String inKey;    private String input;    private String output;    private String name;  public ClientSide(Socket c, Scanner k, Scanner i, PrintWriter o)  {    server = c;    key = k;    inServer = i;    outServer = o;    inKey = null;    input = null;    output = null;    name = null;    out = new OutputThread(this, inKey);    in = new InputThread(this, input);  }    public String getName()  {      return name;  }    public boolean isAlive()  {    return server.isConnected();  }  public void handShake()  {    System.out.println(inServer.nextLine());    outServer.println(key.nextLine());    System.out.println(inServer.nextLine());    name = (inServer.nextLine());    System.out.println(name);    System.out.println(inServer.nextLine());    while(inServer.hasNextLine())    {      input = inServer.nextLine();      if(input.equals("$")) break;      else      	System.out.println(input);    }    out.start();    in.start();  }  public void checkOutThread()  {    if(out.isAlive()) { return; }     else    {      out = new OutputThread(this, inKey);      out.start();    }   }  public void checkInThread()  {    if(in.isAlive()) { return; }    else    {      in = new InputThread(this, inKey);      in.start();    }  }  public  String readKeyboard()  {    return key.nextLine();  }  public  String readServer()  {    return inServer.nextLine();  }    public  void sendServer(String message)  {    outServer.println(message);  }  public void done()  {    System.exit(0);    try{      key.close();      inServer.close();      outServer.close();      server.close();      System.exit(0);    } catch (Exception e) {}  }  public static void main(String[] args) throws Exception  {      //connect to the server        Socket server = new Socket("localhost", 3456);      Scanner key = new Scanner(System.in);      Scanner i   = new Scanner(server.getInputStream());      PrintWriter o = new PrintWriter(server.getOutputStream(), true);      ClientSide chat = new ClientSide(server,key,i,o);      chat.handShake();      while(chat.isAlive())      {        chat.checkOutThread();        chat.checkInThread();      }      System.exit(0);  }}